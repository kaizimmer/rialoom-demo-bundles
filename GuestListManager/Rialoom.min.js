if(!org)var org={};if(!org.rialoom)org.rialoom={};if(!org.rialoom.utils)org.rialoom.utils={};if(!org.rialoom.utils.ClassUtils)org.rialoom.utils.ClassUtils=function(){};org.rialoom.utils.ClassUtils.createPackage=function(c){if(!c)throw Error("org.rialoom.utils.ClassUtils.createPackage | no packagePath passed");c=c.split(".");for(var a=window,b=0;b<c.length;b++){if(a[c[b]]==null)a[c[b]]={};a=a[c[b]]}return a};
org.rialoom.utils.ClassUtils.createConstructor=function(c,a){if(!a)throw Error("org.rialoom.utils.ClassUtils.createConstructor | no className passed");var b=org.rialoom.utils.ClassUtils.createPackage(c);if(b[a]==null)b[a]=new Function;return b[a]};org.rialoom.utils.ClassUtils.inherits=function(c,a){function b(){}b.prototype=a.prototype;c.prototype=new b;c.prototype.constructor=c;c._superClass=a.prototype};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.utils");org.rialoom.utils.Delegate=function(){};
org.rialoom.utils.Delegate.create=function(c,a){return function(){a.apply(c,arguments)}};org||(org={});if(!org.rialoom)org.rialoom={};if(!org.rialoom.utils)org.rialoom.utils={};if(!org.rialoom.utils.Debug)org.rialoom.utils.Debug={};org.rialoom.utils.Debug.isLogging=true;org.rialoom.utils.Debug.log=function(){if(this.isLogging)try{if(navigator.userAgent.toLowerCase().indexOf("msie 8")==-1)console.log.apply(console,arguments);else{for(var c=[],a=0;a<arguments.length;a++)c.push(arguments[a]);console.log(c.join(" | "))}}catch(b){}};
org.rialoom.utils.Debug.activateLogging=function(){this.isLogging=true};org.rialoom.utils.Debug.disableLogging=function(){this.isLogging=false};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.events");org.rialoom.events.Event=function(c,a){var b=false;this.getType=function(){return c};this.getTarget=function(){return a};this.getIsPropagationStopped=function(){return b};this.stopPropagation=function(){b=true}};
org.rialoom.events.Event.prototype.toString=function(){return"[org.rialoom.events.Event type: "+this.getType()+" | target: "+this.getTarget()+" ]"};org.rialoom.events.Event.COMPLETE="COMPLETE";org.rialoom.events.Event.LOADED="LOADED";org.rialoom.events.Event.INIT="INIT";org.rialoom.utils.ClassUtils.createPackage("org.rialoom.events");
org.rialoom.events.EventListenerList=function(c,a){var b=[];this.addEventListener=function(d,g){for(var e=0;e<b.length;e++)if(b[e].scope==d&&b[e].func==g)return false;b.push({scope:d,func:g});return true};this.removeEventListener=function(d,g){for(var e=0;e<b.length;e++)if(b[e].scope==d&&b[e].func==g){b.splice(e,1);return true}return false};this.getEventName=function(){return c};this.getEventClass=function(){return a};this.getListeners=function(){return b};this.destroy=function(){b=null};this.toString=
function(){return"[org.rialoom.events.EventListenerList]"}};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.events");
org.rialoom.events.EventListenerListCollection=function(){var c=[];this.getListenerList=function(a,b){for(var d=0;d<c.length;d++)if(c[d].getEventName()==a&&c[d].getEventClass()==b)return c[d];return null};this.addListenerList=function(a,b){for(var d=0;d<c.length;d++)if(c[d].getEventName()==a&&c[d].getEventClass()==b)return null;d=new org.rialoom.events.EventListenerList(a,b);c.push(d);return d};this.toString=function(){return"[org.rialoom.events.EventListenerListCollection]"}};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.events");
org.rialoom.events.EventDispatcher=function(){var c=new org.rialoom.events.EventListenerListCollection;this.addEventListener=function(a,b,d,g){var e=c.getListenerList(a,g);e||(e=c.addListenerList(a,g));return e.addEventListener(b,d)};this.removeEventListener=function(a,b,d,g){a=c.getListenerList(a,g);if(!a)return false;return a.removeEventListener(b,d)};this.dispatchEvent=function(a){var b=c.getListenerList(a.getType(),a.constructor),d=c.getListenerList(a.getType());if(b!=null){b=b.getListeners();
for(var g=0;g<b.length;g++){if(a.getIsPropagationStopped())return;b[g].func.call(b[g].scope,a)}}if(d!=null){d=d.getListeners();for(b=0;b<d.length;b++){if(a.getIsPropagationStopped())return;d[b].func.call(d[b].scope,a)}}};this.toString=function(){return"[org.rialoom.events.EventDispatcher]"}};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.net.services");
org.rialoom.net.services.ServiceRequest=function(c,a){this.url=c;this.method=a;this.httpMethod="post";this.contentType="text/html; charset=UTF-8";this.data=null};org.rialoom.net.services.ServiceRequest.prototype.getURL=function(){return this.url};org.rialoom.net.services.ServiceRequest.prototype.setURL=function(c){this.url=c};org.rialoom.net.services.ServiceRequest.prototype.getMethodName=function(){return this.method};
org.rialoom.net.services.ServiceRequest.prototype.setMethodName=function(c){this.method=c};org.rialoom.net.services.ServiceRequest.prototype.getHttpMethod=function(){return this.httpMethod};org.rialoom.net.services.ServiceRequest.prototype.setHttpMethod=function(c){this.httpMethod=c};org.rialoom.net.services.ServiceRequest.prototype.setContentType=function(c){this.contentType=c};org.rialoom.net.services.ServiceRequest.prototype.getContentType=function(){return this.contentType};
org.rialoom.net.services.ServiceRequest.prototype.setData=function(c){this.data=c};org.rialoom.net.services.ServiceRequest.prototype.getData=function(){return this.data};org.rialoom.net.services.ServiceRequest.prototype.toString=function(){return"[org.rialoom.mvcs.ServiceRequest | url: "+this.url+" | httpMethod: "+this.httpMethod+" | contentType: "+this.contentType+" data: "+this.data+" ]"};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.net.services");
org.rialoom.net.services.ServiceCall=function(c,a,b,d){if(!a||!(a instanceof org.rialoom.net.services.ServiceRequest))throw Error("org.rialoom.net.services.ServiceCall constructor | serviceRequest param is no instance of org.rialoom.net.services.ServiceCall !");c.ajax({type:a.getHttpMethod(),url:a.getURL(),data:a.getData(),dataType:a.getContentType(),success:b,error:d})};org.rialoom.net.services.ServiceCall.prototype.toString=function(){return"[org.rialoom.net.services.ServiceCall]"};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.mvcs");
org.rialoom.mvcs.Actor=function(){this.mapID=null;this.dispatch=function(){};this.getEventDispatcher=function(){}};org.rialoom.mvcs.Actor.prototype.toString=function(){return"[org.rialoom.mvcs.Actor]"};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.mvcs");org.rialoom.mvcs.AbstractCommand=function(){org.rialoom.mvcs.Actor.call(this);this.getCommandMap=function(){};this.getMediatorMap=function(){};this.getModelMap=function(){}};
org.rialoom.utils.ClassUtils.inherits(org.rialoom.mvcs.AbstractCommand,org.rialoom.mvcs.Actor);org.rialoom.mvcs.AbstractCommand.prototype.execute=function(){throw Error("org.rialoom.mvcs.AbstractCommand .execute() must be overriden");};org.rialoom.mvcs.AbstractCommand.prototype.toString=function(){return"[org.rialoom.mvcs.AbstractCommand]"};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.mvcs");
org.rialoom.mvcs.AbstractMediator=function(){org.rialoom.mvcs.Actor.call(this);this.getModelMap=function(){};this.$view=null};org.rialoom.utils.ClassUtils.inherits(org.rialoom.mvcs.AbstractMediator,org.rialoom.mvcs.Actor);org.rialoom.mvcs.AbstractMediator.prototype.onRegister=function(){throw Error("org.rialoom.mvcs.AbstractMediator.onRegister must be overriden by subclass!");};org.rialoom.mvcs.AbstractMediator.prototype.toString=function(){return"[org.rialoom.mvcs.AbstractMediator]"};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.base");
org.rialoom.base.ActorMap=function(c){var a=[],b=0;this.addActor=function(d,g){if(d==null)throw Error("org.rialoom.base.ActorMap.addActor | passed bad actorClass param: "+d);if(g)for(var e=0;e<a.length;e++){if(a[e].classRef==d&&a[e].id==g)throw Error("org.rialoom.base.ActorMap.addActor | passed actorClass [ "+d+" ] already registered with passed id [ "+g+" ] !");}else g="unnamed-actor-"+b++;e=new d;e.mapID=g;e.getEventDispatcher=function(){return c};e.dispatch=function(o){c.dispatchEvent(o)};a.push({classRef:d,
instance:e,id:g});return e};this.getActor=function(d,g){if(!d||!g)return null;for(var e=0;e<a.length;e++)if(a[e].classRef==d&&g==a[e].id)return a[e].instance;return null};this.getActors=function(d){var g=[];if(d==null)for(e=0;e<a.length;e++)g.push(a[e].instance);else for(var e=0;e<a.length;e++)a[e].classRef==d&&g.push(a[e].instance);return g}};org.rialoom.base.ActorMap.prototype.toString=function(){return"[org.rialoom.mvcs.ActorMap]"};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.base");
org.rialoom.base.MediatorMap=function(c,a){function b(h,f,k){if(d.getActor(f,k)!=null)return false;f=d.addActor(f,k);f.getModelMap=function(){return g};f.$view=h;f.onRegister();return true}var d=new org.rialoom.base.ActorMap(c),g=a,e=[],o=[];this.getMediator=function(h,f){return d.getActor(h,f)};this.getMediators=function(h){return d.getActors(h)};this.mapElement=this.mapView=function(h,f,k){if(h==null)throw Error("org.rialoom.base.MediatorMap.(mapView/mapElement) | no element parameter passed");
if(!f||!(f.prototype instanceof org.rialoom.mvcs.AbstractMediator))throw Error("org.rialoom.base.MediatorMap.(mapView/mapElement) | passed bad mediatorClass [ "+f+" ]");h=h.jquery!=null?h:$(h);if(h.length>1&&k!=null)throw Error("org.rialoom.base.MediatorMap.(mapView/mapElement) | cannot register multiple doc elements to the same id [ "+k+" ]");for(var j=0;j<h.length;j++){for(var l=false,m=0;m<o.length;m++)if(h[j]==o[m]){l=true;break}if(l)org.rialoom.utils.Debug.log("org.rialoom.base.MediatorMap.(mapView/mapElement) | Mapping failed !!! Already mapped dom element ",
h[j]);else{o.push(h[j]);b($(h[j]),f,k)}}};this.mapSelector=function(h,f,k){if(h==null)throw Error("org.rialoom.base.MediatorMap.mapSelector | no selector param passed");if(!f||!(f.prototype instanceof org.rialoom.mvcs.AbstractMediator))throw Error("org.rialoom.base.MediatorMap.mapSelector | passed bad mediatorClass [ "+f+" ]");for(var j=$(h),l=0;l<j.length;l++)b($(j[l]),f);if(k){for(l=0;l<e.length;l++)if(h==e[l].selector)return;e.push({selector:h,mediatorClass:f})}};this.unmapSelector=function(h){for(var f=
0;f<e.length;f++)if(h==e[f].selector){e.splice(f,1);return true}return false};this.scanDocument=function(){for(var h=0;h<e.length;h++)this.mapView(e[h].selector,e[h].mediatorClass)}};org.rialoom.base.MediatorMap.prototype.toString=function(){for(var c=[],a=this.getMediators(),b=0;b<a.length;b++)c.push(a[b].mapID);return"[org.rialoom.mvcs.MediatorMap | registered mediators [ "+c.join(" | ")+" ] ]"};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.base");
org.rialoom.base.ModelMap=function(c){var a=new org.rialoom.base.ActorMap(c);this.addModel=function(b,d){if(b==null)throw Error("org.rialoom.base.ModelMap.addModel | no modelClass parameter passed!");if(!(b.prototype instanceof org.rialoom.mvcs.Actor))throw Error("org.rialoom.base.ModelMap.addModel | modelClass [ "+b+" ] parameter needs to be a subclass of org.rialoom.mvcs.Actor");if(a.getActor(b,d)!=null)return false;a.addActor(b,d);return true};this.getModel=function(b,d){return a.getActor(b,d)};
this.getModels=function(b){return a.getActors(b)}};org.rialoom.base.ModelMap.prototype.toString=function(){for(var c=[],a=this.getModels(),b=0;b<a.length;b++)c.push(a[b].mapID);return"[org.rialoom.mvcs.ModelMap | registered models [ "+c.join(" | ")+" ] ]"};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.base");
org.rialoom.base.CommandMap=function(c,a,b){function d(k){var j=k.getType();if(f[j]){j=f[j].commands;for(var l=0;l<j.length;l++)if(!(j[l].eventClass!=null&&!(k instanceof j[l].eventClass))){var m=new j[l].command;m.dispatch=function(n){e.dispatchEvent(n)};m.getEventDispatcher=function(){return e};m.getCommandMap=function(){return g};m.getMediatorMap=function(){return o};m.getModelMap=function(){return h};m.execute(k)}for(l=j.length-1;l>=0;l--)j[l].eventClass!=null&&!(k instanceof j[l].eventClass)||
j[l].isOneShot&&j.splice(l,1)}}var g=this,e=c,o=a,h=b,f={};this.mapEvent=function(k,j,l,m){var n=org.rialoom.mvcs.AbstractCommand;if(!j||!(j.prototype instanceof n))throw Error("org.rialoom.base.CommandMap .mapEvent() | commandClass param "+j+" is no subclass of "+n+"!");f[k]||(f[k]={eventType:k,commands:[]});n=f[k].commands;for(var p=0;p<n.length;p++)if(n[p].eventClass==l)if(n[p].command==j)return false;f[k].commands.push({command:j,eventClass:l,isOneShot:m});e.addEventListener(k,this,d)};this.unmapEvent=
function(k,j,l){if(!f[k])return false;k=f[k].commands;for(i=0;i<k.length;i++)if(k[i].command==j)if(k[i].eventClass==l){k.splice(i,1);return true}return false}};org.rialoom.base.CommandMap.prototype.toString=function(){return"[org.rialoom.mvcs.CommandMap]"};org.rialoom.utils.ClassUtils.createPackage("org.rialoom.base");org.rialoom.base.ContextEvent=function(c,a){org.rialoom.events.Event.call(this,c,a);this.toString=function(){return"[org.rialoom.base.ContextEvent type: "+c+" | target: "+a+" ]"}};
org.rialoom.utils.ClassUtils.inherits(org.rialoom.base.ContextEvent,org.rialoom.events.Event);org.rialoom.base.ContextEvent.STARTUP_COMPLETE="STARTUP_COMPLETE";org.rialoom.utils.ClassUtils.createPackage("org.rialoom.mvcs");
org.rialoom.mvcs.AbstractContext=function(){var c=new org.rialoom.events.EventDispatcher,a=new org.rialoom.base.ModelMap(c),b=new org.rialoom.base.MediatorMap(c,a),d=new org.rialoom.base.CommandMap(c,b,a);this.getCommandMap=function(){return d};this.getMediatorMap=function(){return b};this.getModelMap=function(){return a};this.getEventDispatcher=function(){return c};this.startup()};org.rialoom.mvcs.AbstractContext.prototype.mapModels=function(){};
org.rialoom.mvcs.AbstractContext.prototype.mapCommands=function(){};org.rialoom.mvcs.AbstractContext.prototype.mapMediators=function(){};org.rialoom.mvcs.AbstractContext.prototype.startup=function(){this.mapModels();this.mapCommands();this.mapMediators();var c=this.getEventDispatcher(),a=new org.rialoom.base.ContextEvent(org.rialoom.base.ContextEvent.STARTUP_COMPLETE,this);c.dispatchEvent(a)};org.rialoom.mvcs.AbstractContext.prototype.toString=function(){return"[org.rialoom.mvcs.AbstractContext]"};
